<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Quantum Minesweeper{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

  <!-- Preload theme before paint -->
  <script>
    (function () {
      try {
        const KEY = 'qms_theme';
        let t = localStorage.getItem(KEY);
        if (!t && window.matchMedia) {
          t = window.matchMedia('(prefers-color-scheme: light)').matches
              ? 'light' : 'dark';
        }
        if (t === 'light') {
          document.documentElement.classList.add('light');
        }
      } catch (e) {
        /* fail silently */
      }
    })();
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/static/style.css">

  <!-- MathJax for rendering LaTeX -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async 
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

  <!-- Theme toggle script (non-critical, can be loaded after CSS) -->
  <script src="/static/theme.js" defer></script>

  {% block extra_head %}{% endblock %}
</head>

<header class="header">
  <h1>Quantum Minesweeper ðŸ’£</h1>
  <form action="/game?suid={{ suid }}" method="post">
    <button type="button" id="toggle-theme" class="theme-button" title="Toggle theme">ðŸŒ™</button>
</form>
</header>

<body>
  <main>
    {% block content %}{% endblock %}
  </main>
  {% include "footer.html" %}
</body>
</html>
