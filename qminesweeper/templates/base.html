<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  {% if BASE_URL %}
  <meta property="og:url" content="{{ BASE_URL }}">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Quantum Minesweeper">
  <meta property="og:description" content="A quantum twist on the classic game of Minesweeper â€” explore, entangle, and measure!">
  <meta property="og:image" content="{{ BASE_URL }}/static/og-image.png">
  {% endif %}

  <title>{% block title %}Quantum Minesweeper{% endblock %}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

  <style>
    html { background: #17191e; }
    html.light { background: #f7f9fc; }
  </style>

  <!-- Preload theme before paint -->
  <script>
    (function () {
      try {
        const KEY = 'qms_theme';
        let t = localStorage.getItem(KEY);
        if (!t && window.matchMedia) {
          t = window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
        }
        if (t === 'light') {
          document.documentElement.classList.add('light');
          document.body?.classList.add('light');
        }
      } catch (e) {}
    })();
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/static/style.css">

  <!-- Theme toggle -->
  <script src="/static/scripts/theme_toggle.js" defer></script>

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  {% block extra_head %}{% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}">
  {% include "header.html" %}

  <div class="app-body">
    <main  class="{% block main_class %}{% endblock %}">
      {% block content %}{% endblock %}

      <!-- Help Sidebar -->
      {% if FEATURES.ENABLE_HELP %}
      <aside id="sidebar">
        <div id="sidebar-spacer"></div>
        <div id="sidebar-header">
          <h2>Help</h2>
        </div>
        <div id="sidebar-content">
          <h3 class="help-title" id="help-title">Object Name</h3>

          <div id="help-visual" class="help-card"></div>
          <div id="help-text" class="help-card"></div>
        </div>
      </aside>
      {% endif %}
    </main>

    <script>
      window.QMS_ENABLE_HELP = {{ FEATURES.ENABLE_HELP | tojson }};
    </script>
    <script src="/static/scripts/help.js" defer></script>
  </div>

  {% include "footer.html" %}
</body>
</html>
